@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* --- START: SURGICAL ADDITION --- */
    /* Applying a subtle gradient background for a more premium, less sterile feel.
       This creates a soft, inviting canvas for the application content. */
    @apply bg-gradient-to-br from-base-100 to-base-200 text-slate-800;
    /* --- END: SURGICAL ADDITION --- */
  }
}


/*
  ==============================================
  MODERN THEMATIC PROGRESS BAR
  ==============================================
*/
.progress-bar-container {
  @apply w-full bg-neutral-200 rounded-full h-2.5 overflow-hidden;
}

.progress-bar-animated {
  @apply h-full w-full;
  background-image: linear-gradient(
    90deg,
    #2E8540,
    #3395FF,
    #2E8540
  );
  background-size: 300% 100%;
  animation: progress-animation 2.5s ease-in-out infinite;
}

@keyframes progress-animation {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}


/*
  ==============================================
  CUSTOM MAP CONTROL STYLES
  ==============================================
*/
.leaflet-control-layers {
  @apply bg-white/80 backdrop-blur-md shadow-[0_4px_12px_rgba(0,0,0,0.05)] border-none rounded-xl p-1;
}
.leaflet-control-layers-base label span {
  @apply text-neutral-800 font-medium text-sm;
}
.leaflet-control-layers-selector {
  @apply mt-0.5;
}

/*
  ==============================================
  INSTRUCTION TOAST ANIMATIONS
  ==============================================
*/
@layer utilities {
  @keyframes fade-in-down {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-down {
    animation: fade-in-down 0.5s ease-out forwards;
  }
}

/*
  ==============================================
  MOBILE RESPONSIVENESS - A FOCUSED EXPERIENCE
  ==============================================
*/
@media (max-width: 767px) {
  /* --- The Focus View: Canvas as the Stage, Controls as the Tool --- */
  /* When a measurement is active, the layout transforms. The canvas fills the screen,
     and the controls are presented in an ergonomic sheet at the bottom. */
  .mobile-focus-view #control-panel {
    @apply absolute bottom-0 left-0 w-full bg-gray-50 z-20;
    @apply border-t border-gray-200 rounded-t-2xl shadow-[0_-4px_20px_rgba(0,0,0,0.1)];
    max-height: 85vh;
    overflow-y: auto;
    transition: transform 0.3s ease-in-out;
  }

  .mobile-focus-view #display-panel {
    @apply fixed inset-0 z-10 p-0;
  }

  .mobile-focus-view #image-canvas {
    @apply w-full h-full object-contain rounded-none;
  }

  /* --- Session History: A Timeline of Cards --- */
  /* On mobile, the data table is reimagined as a vertical timeline of cards,
     making each result a clear, self-contained entry. */
  .mobile-cards-table thead {
    @apply hidden;
  }
  .mobile-cards-table tr {
    @apply block border border-gray-200 rounded-xl mb-4 shadow-sm bg-white;
  }
  .mobile-cards-table td {
    @apply flex justify-between items-center p-3 border-b border-gray-100 text-sm;
  }
  .mobile-cards-table td:last-child {
    @apply border-b-0;
  }
  .mobile-cards-table td::before {
    content: attr(data-label);
    @apply font-semibold text-gray-600 text-left pr-4;
  }
  .mobile-cards-table td > * {
    @apply text-right;
  }
  .mobile-cards-table td[data-label="Actions"] > button {
    @apply ml-auto; /* Ensure delete button is pushed right */
  }
}