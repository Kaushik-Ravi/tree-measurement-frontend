@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/*
  ==============================================
  MODERN THEMATIC PROGRESS BAR
  ==============================================
*/
.progress-bar-container {
  @apply w-full bg-neutral-200 rounded-full h-2.5 overflow-hidden;
}

.progress-bar-animated {
  @apply h-full w-full;
  /* Using the literal hex codes from the tailwind.config.js file */
  background-image: linear-gradient(
    90deg,
    #2E8540, /* brand.light */
    #3395FF, /* accent.light */
    #2E8540  /* brand.light */
  );
  background-size: 300% 100%;
  animation: progress-animation 2.5s ease-in-out infinite;
}

@keyframes progress-animation {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}


/*
  ==============================================
  CUSTOM MAP CONTROL STYLES
  ==============================================
*/

/* --- Base Layer Control --- */
.leaflet-control-layers {
  @apply bg-white/80 backdrop-blur-md shadow-[0_4px_12px_rgba(0,0,0,0.05)] border-none rounded-xl p-1;
}
.leaflet-control-layers-base label span {
  @apply text-neutral-800 font-medium text-sm;
}
.leaflet-control-layers-selector {
  @apply mt-0.5;
}


/* --- Geocoder Search Bar --- */
.geosearch-wrapper {
  @apply absolute top-4 left-1/2 -translate-x-1/2 z-[1000];
}
.geosearch-container {
 @apply relative w-72 md:w-96;
}
.geosearch-input-wrapper {
  @apply flex items-center bg-white/80 backdrop-blur-md shadow-[0_4px_12px_rgba(0,0,0,0.05)] rounded-xl border border-transparent focus-within:ring-2 transition-all;
  @apply focus-within:border-[#007AFF80] focus-within:ring-[#007AFF33];
}
.geosearch-icon {
  @apply pl-4 pr-2 text-neutral-400;
}
.geosearch-input {
  @apply h-12 w-full pr-10 border-none text-sm font-sans placeholder-neutral-500 bg-transparent outline-none text-neutral-800;
}
.geosearch-clear-button {
  @apply absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-full text-neutral-500 hover:bg-neutral-200 hover:text-neutral-700 transition-colors;
}
.geosearch-results-dropdown {
  @apply absolute top-full mt-2 w-full bg-white/90 backdrop-blur-md shadow-[0_6px_16px_rgba(0,0,0,0.08)] rounded-xl border-[#E6E6E680] z-[1000] overflow-hidden;
}
.geosearch-results-dropdown > div {
  @apply text-sm px-4 py-3 border-b-[#E6E6E6CC] cursor-pointer transition-colors text-neutral-700;
}
.geosearch-results-dropdown > div:last-child {
  @apply border-b-0;
}
.geosearch-results-dropdown > div:hover {
  @apply bg-[#007AFF] text-white;
}
.locate-me-button-wrapper {
  @apply absolute bottom-28 right-4 z-[1000];
}
.locate-me-button {
  @apply p-3 bg-white/80 backdrop-blur-md rounded-full shadow-[0_4px_12px_rgba(0,0,0,0.05)] hover:bg-white transition-colors border-[#E6E6E680];
}

/*
  ==============================================
  MOBILE RESPONSIVENESS: UX & LAYOUT
  ==============================================
*/
@media (max-width: 767px) {
  /* --- Bottom Sheet for Mobile Controls --- */
  .mobile-control-sheet {
    @apply absolute bottom-0 left-0 w-full bg-gray-50 z-10;
    @apply border-t border-gray-200 rounded-t-2xl shadow-[0_-4px_20px_rgba(0,0,0,0.1)];
    max-height: 80vh;
    overflow-y: auto;
    transition: height 0.3s ease-in-out;
  }

  .mobile-sheet-handle-container {
    @apply w-full flex justify-center py-2 cursor-grab;
  }

  .mobile-sheet-handle {
    @apply w-10 h-1.5 bg-gray-300 rounded-full;
  }

  /* --- Mobile Input Bar --- */
  .mobile-input-bar {
    @apply flex items-start gap-3;
  }

  /* --- CSS-Only Tabs for Results --- */
  .mobile-tabs {
    @apply w-full;
  }
  .mobile-tabs input[type="radio"] {
    @apply hidden;
  }
  .mobile-tabs label {
    @apply inline-block w-1/3 p-3 text-center font-medium text-sm text-gray-500 bg-gray-100 border-b-2 border-transparent cursor-pointer transition-colors;
    @apply first-of-type:rounded-tl-lg last-of-type:rounded-tr-lg;
  }
  .mobile-tabs input[type="radio"]:checked + label {
    @apply bg-white text-green-700 border-green-700;
  }
  .tab-panel {
    @apply hidden p-4 bg-white;
  }
  .mobile-tabs input[type="radio"]:checked + label + input + label + input + label + .tab-panel,
  .mobile-tabs input[type="radio"]:checked + label + input + label + .tab-panel,
  .mobile-tabs input[type="radio"]:checked + label + .tab-panel {
    @apply block;
  }

  #tab-metrics:checked ~ #panel-metrics,
  #tab-enrich:checked ~ #panel-enrich,
  #tab-session:checked ~ #panel-session {
      display: block;
  }

  /* --- Results Table Mobile Cards --- */
  .mobile-cards-table thead {
    @apply hidden;
  }
  .mobile-cards-table tr {
    @apply block border-2 border-gray-200 rounded-xl mb-4 shadow-sm bg-white;
  }
  .mobile-cards-table td {
    @apply flex justify-between items-center text-right p-3 border-b border-gray-100;
  }
  .mobile-cards-table td:last-child {
    @apply border-b-0;
  }
  .mobile-cards-table td::before {
    content: attr(data-label);
    @apply font-semibold text-gray-600 text-left pr-4;
  }
  .mobile-cards-table td {
    @apply text-right;
  }
  .mobile-cards-table td[data-label="File"],
  .mobile-cards-table td[data-label="Species"],
  .mobile-cards-table td[data-label="Condition"],
  .mobile-cards-table td[data-label="Ownership"] {
    @apply text-left;
  }
  .mobile-cards-table td[data-label="Actions"] {
    @apply justify-center;
  }
  .mobile-cards-table td[data-label="Actions"]::before {
    @apply content-none;
  }
  .mobile-cards-table td[data-label="File"],
  .mobile-cards-table td[data-label="Species"] {
    @apply whitespace-normal max-w-full;
  }
}